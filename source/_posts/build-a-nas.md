---
title: 利用手头已有资源尽可能高配的搭一台nas
date: 2019-12-23
tags:
- nas
---

现成已有的nas：一台蜗牛星际B口单百兆，现在放了四块500G的硬盘租了一个raid6。除去硬盘成本268（机器）+200（电源）, 硬盘是旧硬盘. 用了三四个月之后已经有三四块硬盘报警了.

总是觉得有些不爽，主要是又不想把现有nas里面的数据都拷出来换硬盘，又觉得现在的百兆和1T容量不太能让人满意，所以想搞一个千兆的高性能nas。

看了看市面上nas的价格，emmmm，我还是自己搞吧。正好自己现在还闲置着一台核显的itx小机器

## 手头硬件

### CPU和主板

1. 四代i3 主板4个sata3, 一个m2接口, 一个pci-e 16x接口, 两个ddr4内存接口
2. J1900, 主板两个sata2接口, 两个ddr3内存接口.

### 内存

两条4g 台式机ddr4内存

一条ddr3内存接口

### 硬盘

1. 闪迪 Sata3 256G SSD
2. 两条杂牌 M2 128G SSD
3. 两块2.5寸机械硬盘 500G 1T
4. 五块3.5寸机械硬盘 均500G, 目前看来是不够的, 还会再买.

购入256g nvme ssd一条, 牌子就不说了

### 机箱

1. 蜗牛星际B款 不是前面提到的已经在用的nas, 是双十一新买的, 50+邮费20
2. 迎广 肖邦 只有两个硬盘位, 用不上.
3. 一台工控机, 只有两个硬盘位, 更用不上.

## 需求

1. 用来跑数据库, 比如mysql, mongodb, redis等等, 需要跑在两块raid1硬盘上.
2. 挂bt, 不需要raid.
3. 备份电脑数据, 跟(1)一起放在raid1上.

所以需要购买的只有几块硬盘和新电源. 星际蜗牛的4个硬盘位已经足够了. 两块硬盘组raid1, 两块硬盘直接用.

如果以后需求大了, 需要升级更多硬盘的话, 可以换一个新的机箱, 用pcie接一个阵列卡, 最多能支持12块硬盘.

最后选择了蜗牛星际的廉价机箱, 到手之后是B款. 硬盘还没买. 先用了剩下的四块硬盘硬盘.

硬盘还没选好, 先把其他的硬件装起来了.

![机箱架子](https://tva4.sinaimg.cn/large/bd69bf14ly1ga6r768jf7j23402c04qx.jpg)
![正面](https://tva3.sinaimg.cn/large/bd69bf14ly1ga6r674zqxj22c0340kjt.jpg)

![之前的itx机箱](https://tvax3.sinaimg.cn/large/bd69bf14ly1ga6r542c9aj22c0340e8a.jpg)

空间非常紧张, 说紧凑也行

![好几年没见](https://tvax3.sinaimg.cn/large/bd69bf14ly1ga6r4qqltgj22c0340b2g.jpg)

![CPU背板](https://tva2.sinaimg.cn/large/bd69bf14ly1ga6r47dg8gj22c03407wr.jpg)

已经有点生修了

![20191222_152216649_iOS.heic](https://tvax4.sinaimg.cn/large/bd69bf14ly1ga6r3qvkv5j22c03407wq.jpg)

这个机箱要把所有的线接上之后再把主板扣上去.

原装散热器的高度是足够的, 为了方便安装我还是换了一个比较矮的`IS-30`, 高度3cm, 是一开始担心原装散热器太高买的.

## 系统

纠结了半天, 还是没直接用debian或者ubuntu这种发行版, 选择了OpenMediaVault.

用了一天, 很满足我的需求(因为我经常会ssh上去), 但是单纯作为nas的话, web界面功能想必万由易用性还是差很多.
